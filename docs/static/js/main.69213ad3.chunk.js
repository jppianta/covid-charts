(this["webpackJsonpcorona-dashboard"]=this["webpackJsonpcorona-dashboard"]||[]).push([[0],{128:function(e,t,a){e.exports=a.p+"static/media/Covid-19-Charts.807e241c.png"},159:function(e,t,a){e.exports=a(285)},164:function(e,t,a){},285:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),i=a.n(s),o=a(13),c=a(14),l=a(17),h=a(16),u=a(18),d=a(286),m=(a(164),a(128)),f=a.n(m),p=d.a.Header,y=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(p,{className:"header"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{className:"logoContainer"},r.a.createElement("img",{className:"header-title",src:f.a,alt:"Covid Logo"}))))}}]),t}(n.Component),v=a(149),C=a(40),b=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).updateChartSize=function(){var e=document.getElementById("containerHistory");a.chart.changeSize(e.offsetWidth-10,e.offsetHeight>=400?e.offsetHeight-10:400)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateChartSize)}},{key:"parseData",value:function(e){var t=e.map((function(e){return Object.keys(e.confirmed.history).map((function(t){return{country:e.name,date:new Date(t),cases:e.confirmed.history[t]}}))}));return[].concat.apply([],t)}},{key:"parseDate",value:function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear())}},{key:"componentDidUpdate",value:function(){var e=this.parseData(this.props.data);this.chart.changeData(e),this.chart.line().position("date*cases").color("country").shape("smooth"),this.chart.tooltip({showTitle:!1});var t=0;e.forEach((function(e){t=e.cases>t?e.cases:t})),this.chart.scale("cases",{alias:"Number of cases",max:t+.2*t}),this.chart.render(),this.updateChartSize()}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.updateChartSize);var t=document.getElementById("containerHistory");this.chart=new C.Chart({container:t,height:t.offsetHeight>=400?t.offsetHeight-10:400,renderer:"svg"}),this.chart.tooltip({showTitle:!1}),this.chart.data(this.parseData(this.props.data)),this.chart.scale({date:{range:[0,1]},cases:{nice:!0}}),this.chart.tooltip({showCrosshairs:!0,shared:!0}),this.chart.scale("date",{alias:"Date (mm/dd/yyyy)"}),this.chart.axis("date",{label:{formatter:function(t){var a=new Date(Number(t));return e.parseDate(a)}},title:{offset:20,style:{fill:"#aaa"}}}),this.chart.scale("cases",{alias:"Number of cases"}),this.chart.axis("cases",{title:{offset:20,style:{fill:"#aaa"}}}),this.chart.render(),this.updateChartSize()}},{key:"render",value:function(){return r.a.createElement("div",{id:"containerHistory",className:"container"})}}]),t}(n.Component),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).updateChartSize=function(){var e=document.getElementById("containerEvolution");a.chart.changeSize(e.offsetWidth-10,e.offsetHeight>=400?e.offsetHeight-10:400)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateChartSize)}},{key:"daysBetweenDates",value:function(e,t){return(t.getTime()-e.getTime())/864e5}},{key:"parseData",value:function(e){var t=this,a=e.map((function(e){var a=Object.keys(e.confirmed.history).filter((function(t){return e.confirmed.history[t]>0}));a.sort((function(e,t){return e=new Date(e),t=new Date(t),e.getTime()-t.getTime()}));var n=new Date(a[0]);return a.map((function(a,r){return 0===r?{country:e.name,time:0,cases:e.confirmed.history[a]}:{country:e.name,time:t.daysBetweenDates(n,new Date(a)),cases:e.confirmed.history[a]}}))}));return[].concat.apply([],a)}},{key:"componentDidUpdate",value:function(){var e=this.parseData(this.props.data);this.chart.changeData(e),this.chart.line().position("time*cases").color("country").shape("smooth"),this.chart.tooltip({showTitle:!1});var t=0;e.forEach((function(e){t=e.cases>t?e.cases:t})),this.chart.scale("cases",{alias:"Number of cases",max:t+.2*t}),this.chart.render(),this.updateChartSize()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateChartSize);var e=document.getElementById("containerEvolution");this.chart=new C.Chart({container:e,height:e.offsetHeight>=400?e.offsetHeight-10:400,renderer:"svg"}),this.chart.tooltip({showTitle:!1}),this.chart.data(this.parseData(this.props.data)),this.chart.scale({time:{sync:!0,min:0},cases:{nice:!0}}),this.chart.tooltip({showCrosshairs:!0,shared:!0}),this.chart.scale("time",{alias:"Days since the first case"}),this.chart.axis("time",{title:{offset:20,style:{fill:"#aaa"}}}),this.chart.scale("cases",{alias:"Number of cases"}),this.chart.axis("cases",{title:{offset:20,style:{fill:"#aaa"}}}),this.chart.render(),this.updateChartSize()}},{key:"render",value:function(){return r.a.createElement("div",{id:"containerEvolution",className:"container"})}}]),t}(n.Component),E=a(68),w=a(288),D=a(102),k=a.n(D),O=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).updateChartSize=function(){var e=document.getElementById("containerBarCases");a.chart.changeSize(e.offsetWidth-10,e.offsetHeight>=400?e.offsetHeight-10:400)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateChartSize)}},{key:"daysBetweenDates",value:function(e,t){return(t.getTime()-e.getTime())/864e5}},{key:"parseData",value:function(e){return e.map((function(e){return{name:e.name,confirmed:e.confirmed.cases,deaths:e.deaths.cases}}))}},{key:"componentDidUpdate",value:function(){var e=this.parseData(this.props.data),t=(new k.a).createView().source(e);t.transform({type:"fold",fields:["confirmed","deaths"],key:"country",value:"cases",retains:["name"]}),this.chart.changeData(t.rows),this.chart.interval().adjust("stack").position("name*cases").color("country"),this.chart.tooltip({shared:!0,showMarkers:!1}),this.chart.interaction("active-region"),this.chart.render(),this.updateChartSize()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateChartSize);var e=document.getElementById("containerBarCases"),t=(new k.a).createView().source(this.parseData(this.props.data));t.transform({type:"fold",fields:["confirmed","deaths"],key:"country",value:"cases",retains:["name"]}),this.chart=new C.Chart({container:e,height:e.offsetHeight>=400?e.offsetHeight-10:400,renderer:"svg"}),this.chart.coordinate().transpose(),this.chart.data(t.rows),this.chart.scale("cases",{nice:!0}),this.chart.axis("name",{label:{offset:12}}),this.chart.tooltip({shared:!0,showMarkers:!1}),this.chart.render(),this.updateChartSize()}},{key:"render",value:function(){return r.a.createElement("div",{id:"containerBarCases",className:"container"})}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).updateChartSize=function(){var e=document.getElementById("containerLogEvolution");a.chart.changeSize(e.offsetWidth-10,e.offsetHeight>=400?e.offsetHeight-10:400)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateChartSize)}},{key:"daysBetweenDates",value:function(e,t){return(t.getTime()-e.getTime())/864e5}},{key:"parseData",value:function(e){var t=this,a=e.map((function(e){var a=Object.keys(e.confirmed.history).filter((function(t){return e.confirmed.history[t]>0}));a.sort((function(e,t){return e=new Date(e),t=new Date(t),e.getTime()-t.getTime()}));var n=new Date(a[0]);return a.map((function(a,r){return 0===r?{country:e.name,time:0,cases:Math.log(e.confirmed.history[a])}:{country:e.name,time:t.daysBetweenDates(n,new Date(a)),cases:Math.log(e.confirmed.history[a])}}))}));return[].concat.apply([],a)}},{key:"componentDidUpdate",value:function(){var e=this.parseData(this.props.data);this.chart.changeData(e),this.chart.line().position("time*cases").color("country").shape("smooth"),this.chart.tooltip({showTitle:!1});var t=0;e.forEach((function(e){t=e.cases>t?e.cases:t})),this.chart.scale("cases",{alias:"Log Number of cases",max:t+.2*t}),this.chart.render(),this.updateChartSize()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateChartSize);var e=document.getElementById("containerLogEvolution");this.chart=new C.Chart({container:e,height:e.offsetHeight>=400?e.offsetHeight-10:400,renderer:"svg"}),this.chart.tooltip({showTitle:!1});var t=this.parseData(this.props.data);this.chart.data(t),this.chart.scale({time:{sync:!0,min:0},cases:{nice:!0}}),this.chart.tooltip({showCrosshairs:!0,shared:!0}),this.chart.scale("time",{alias:"Days since the first case"}),this.chart.axis("time",{title:{offset:20,style:{fill:"#aaa"}}}),this.chart.scale("cases",{alias:"Log Number of cases"}),this.chart.axis("cases",{title:{offset:20,style:{fill:"#aaa"}}}),this.updateChartSize()}},{key:"render",value:function(){return r.a.createElement("div",{id:"containerLogEvolution",className:"container"})}}]),t}(n.Component),S=a(61),z=a.n(S),N=a(76),L=new(function(){function e(){Object(o.a)(this,e),this.baseURL="https://coronavirus-tracker-api.herokuapp.com/v2"}return Object(c.a)(e,[{key:"getLocations",value:function(){var e=Object(N.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.baseURL,"/locations?timelines=1"));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),T=new(function(){function e(){Object(o.a)(this,e),this.data={},this.listeners=[]}return Object(c.a)(e,[{key:"addListener",value:function(e){this.listeners.push(e),Object.values(this.data).length>0&&e(this.data)}},{key:"pullData",value:function(){var e=Object(N.a)(z.a.mark((function e(){var t,a=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getLocations();case 2:t=e.sent,this.data.byCountry=this.parseDataByCountry(t),this.data.total=this.getTotalData(t),this.listeners.forEach((function(e){return e(a.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDataByCountry",value:function(e){var t={};function a(e,t){return Object.keys(t).forEach((function(a){return e[a]=(e[a]||0)+t[a]})),e}return e.locations.forEach((function(e){var n=e.country;t[n]||(t[n]={name:n,coordinates:e.coordinates,updated:e.last_updated,confirmed:{provinces:{},cases:0,history:{}},deaths:{provinces:{},cases:0,history:{}}}),t[n].confirmed.cases+=e.latest.confirmed,t[n].confirmed.history=a(t[n].confirmed.history,e.timelines.confirmed.timeline),t[n].deaths.cases+=e.latest.deaths,t[n].deaths.history=a(t[n].deaths.history,e.timelines.deaths.timeline),""!==e.province&&(t[n].confirmed.provinces[e.province]={name:e.province,cases:e.latest.confirmed,history:e.timelines.confirmed.timeline},t[n].deaths.provinces[e.province]={name:e.province,cases:e.latest.deaths,history:e.timelines.deaths.timeline})})),t}},{key:"getTotalData",value:function(e){var t=this.data.byCountry.US.updated;return{confirmed:{cases:e.latest.confirmed,updated:t},deaths:{cases:e.latest.deaths,updated:t}}}}]),e}()),B=E.a.Option,H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).updateCharts=function(e){var t=Object.values(e.byCountry);t.sort((function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase();return a<n?-1:a>n?1:0})),a.setState({countryNames:t,data:e.byCountry,selectedCountries:["Spain","Italy"]})},a.onCountriesSelected=function(e){a.setState({selectedCountries:e})},a.state={data:{},countryNames:[],selectedCountries:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){T.addListener(this.updateCharts)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"chartsContent"},r.a.createElement("div",{className:"countriesSelector"},r.a.createElement("span",null,"Select the Countries you wish to see data: "),r.a.createElement(E.a,{mode:"multiple",style:{flex:1},placeholder:"Countries",defaultValue:["Spain","Italy"],onChange:this.onCountriesSelected},this.state.countryNames.map((function(e){return r.a.createElement(B,{key:e.name},e.name)})))),r.a.createElement("div",{className:"chartsContainer"},r.a.createElement(w.a,{title:"History",size:"small"},r.a.createElement(b,{data:this.state.selectedCountries.map((function(t){return e.state.data[t]}))})),r.a.createElement(w.a,{title:"Evolution",size:"small"},r.a.createElement(g,{data:this.state.selectedCountries.map((function(t){return e.state.data[t]}))})),r.a.createElement(w.a,{title:"Cases Bar",size:"small"},r.a.createElement(O,{data:this.state.selectedCountries.map((function(t){return e.state.data[t]}))})),r.a.createElement(w.a,{title:"Logarithmic Evolution",size:"small"},r.a.createElement(j,{data:this.state.selectedCountries.map((function(t){return e.state.data[t]}))}))))}}]),t}(n.Component),x=a(290),I=a(287),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).updateStats=function(e){var t=Object.values(e.byCountry).map((function(e){return{name:e.name,confirmed:e.confirmed.cases,deaths:e.deaths.cases}}));a.setState({data:{byCountry:t,total:e.total}})},a.tableColumns=[{title:"Name",dataIndex:"name",key:"name"},{title:"Confirmed Cases",dataIndex:"confirmed",key:"confirmed",sorter:function(e,t){return e.confirmed-t.confirmed}},{title:"Death Cases",dataIndex:"deaths",key:"deaths",sorter:function(e,t){return e.deaths-t.deaths}}],a.state={data:{byCountry:[],total:{confirmed:{},deaths:{}}}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){T.addListener(this.updateStats)}},{key:"getTop6",value:function(e){return e.sort((function(e,t){return t.confirmed-e.confirmed})),e.slice(0,6)}},{key:"parseDate",value:function(e){return e=new Date(e),"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear()," ").concat(this.parseTime(e))}},{key:"parseTime",value:function(e){function t(e){return 1===(e=String(e)).length?"0"+e:e}return"".concat(t(e.getHours()),":").concat(t(e.getMinutes()))}},{key:"render",value:function(){return r.a.createElement("div",{className:"statsContent"},r.a.createElement(w.a,{size:"small",title:"Global Stats"},r.a.createElement("div",{className:"statsContainer"},r.a.createElement(x.a,{title:"Confirmed",value:this.state.data.total.confirmed.cases}),r.a.createElement(x.a,{title:"Deaths",value:this.state.data.total.deaths.cases}),r.a.createElement(x.a,{className:"updateTime",title:"Last Updated",value:this.parseDate(this.state.data.total.confirmed.updated)}))),r.a.createElement("div",{className:"countriesRow"},r.a.createElement(w.a,{className:"countriesTableContainer",size:"small",title:"Cases by Country"},r.a.createElement(I.a,{className:"countriesTable",dataSource:this.state.data.byCountry,columns:this.tableColumns,pagination:!1,size:"middle"})),r.a.createElement(w.a,{size:"small",title:"Countries with most Confirmed Cases"},r.a.createElement("div",{className:"topCountries"},this.getTop6(this.state.data.byCountry).map((function(e){return r.a.createElement(x.a,{key:e.name,title:e.name,value:e.confirmed})}))))))}}]),t}(n.Component),U=a(289),W=a(35),A=d.a.Footer,V=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"info",value:function(){U.a.info({title:"Data Disclaimer",content:r.a.createElement("div",null,r.a.createElement("p",null,"Page that aims to help people to analyze data about covid-19."),r.a.createElement("p",null,"All information comes from the ",r.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19",target:"blank"},"  2019 Novel Coronavirus COVID-19 (2019-nCoV) Data Repository."))),onOk:function(){}})}},{key:"render",value:function(){return r.a.createElement(A,{className:"footer"},r.a.createElement("span",null,"Made By Joao Pedro Pianta"),r.a.createElement(W.a,{type:"default",onClick:this.info},"Data Disclaimer"))}}]),t}(n.Component),R=d.a.Content,F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).setLoaded=function(){a.setState({loaded:!0})},a.state={loaded:!1},T.addListener(a.setLoaded),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(R,{className:"mainContainer"},this.state.loaded?r.a.createElement("div",{className:"mainContent"},r.a.createElement(M,null),r.a.createElement(H,null),r.a.createElement(V,null)):r.a.createElement(v.a,{style:{position:"absolute",top:"50%"}}))}}]),t}(n.Component),J=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){T.pullData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{className:"App"},r.a.createElement(y,null),r.a.createElement(F,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[159,1,2]]]);
//# sourceMappingURL=main.69213ad3.chunk.js.map